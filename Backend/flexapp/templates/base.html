<!-- templates/base.html -->
{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link
        href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
        rel="stylesheet"
        integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
        crossorigin="anonymous"
    />
    <link
        rel="stylesheet"
        href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css"
    />
    <link rel="stylesheet" href="{% static 'css/style.min.css' %}" />
    <title>{% block title %}MITS - FLEX{% endblock %}</title>
    {% block extra_head %}{% endblock %}
</head>
<body>
    {% block blur_form %}
    <div class="blur">
        <form action="" method="POST" id="dynamic-form"></form>
    </div>
    {% endblock %}

    <header>
        <img src="{% static 'img/logo.png' %}" alt="Profile Image" />
        <div class="title">
            <h1>{% block header_title %}MITS - FLEX{% endblock %}</h1>
        </div>
    </header>

    <main>
        {% block content %}{% endblock %}
    </main>

    {% block theme_toggle %}
    <div class="form-check-label">
        {% block action_buttons %}{% endblock %}
        <button id="themeToggle"><i class="bi bi-moon-fill"></i></button>
    </div>
    {% endblock %}

    {% block extra_scripts %}{% endblock %}
    
    <script>
        // Theme toggle functionality
        const toggleSwitch = document.getElementById("themeToggle");
        if (toggleSwitch) {
            const icon = document.querySelector("#themeToggle i");
            const body = document.body;
            const allElements = document.querySelectorAll("*");
            
            toggleSwitch.addEventListener("click", () => {
                const formAll = document.querySelectorAll(
                    "input, select, textarea, option, p, button"
                );
                body.classList.toggle("light-theme");

                allElements.forEach((element) => {
                    element.classList.toggle(
                        "light-theme",
                        body.classList.contains("light-theme")
                    );
                });

                formAll.forEach((element) => {
                    element.classList.toggle(
                        "light-theme",
                        body.classList.contains("light-theme")
                    );
                });
                icon.classList.toggle("bi-moon-fill");
                icon.classList.toggle("bi-brightness-high-fill");
            });
        }
    </script>
</body>
</html>
