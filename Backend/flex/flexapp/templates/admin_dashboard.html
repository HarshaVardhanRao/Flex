{% extends 'base.html' %}
{% block content %}
<h2>Admin Dashboard</h2>
<p>Welcome, {{ user.username }}!</p>



<h3>Students</h3>
<table border="1">
    <tr>
        <th>Username</th>
        <th>Email</th>
        <th>Roll No</th>
        <th>Year</th>
        <th>Section</th>
        <th>Actions</th>
    </tr>
    {% for s in students %}
    <tr>
        <td>{{ s.username }}</td>
        <td>{{ s.email }}</td>
        <td>{{ s.roll_no }}</td>
        <td>{{ s.year }}</td>
        <td>{{ s.section }}</td>
        <td>
            <form method="get" action="{% url 'admin_update_student' s.id %}" style="display:inline;">
                <input type="submit" value="Edit">
            </form>
            <form method="post" action="{% url 'admin_delete_student' s.id %}" style="display:inline;">
                {% csrf_token %}
                <input type="submit" value="Delete" onclick="return confirm('Are you sure?');">
            </form>
        </td>
    </tr>
    {% endfor %}
</table>

<h3>Create New Student</h3>
<form method="post" action="{% url 'admin_create_student' %}">
    {% csrf_token %}
    <label>Username: <input type="text" name="username" required></label><br>
    <label>Email: <input type="email" name="email" required></label><br>
    <label>Password: <input type="password" name="password" required></label><br>
    <label>Roll No: <input type="text" name="roll_no" required></label><br>
    <label>Year: <input type="number" name="year" min="1" max="4" required></label><br>
    <label>Section: <input type="text" name="section" required></label><br>
    <label>Dept: <input type="text" name="dept" required></label><br>
    <input type="submit" value="Create Student">
</form>


<h3>Faculty</h3>
<table border="1">
    <tr>
        <th>Username</th>
        <th>Email</th>
        <th>Department</th>
        <th>Year</th>
        <th>Section</th>
        <th>Actions</th>
    </tr>
    {% for f in faculty %}
    <tr>
        <td>{{ f.username }}</td>
        <td>{{ f.email }}</td>
        <td>{{ f.dept }}</td>
        <td>{{ f.default_year }}</td>
        <td>{{ f.default_section }}</td>
        <td>
            <form method="get" action="{% url 'admin_update_faculty' f.id %}" style="display:inline;">
                <input type="submit" value="Edit">
            </form>
            <form method="post" action="{% url 'admin_delete_faculty' f.id %}" style="display:inline;">
                {% csrf_token %}
                <input type="submit" value="Delete" onclick="return confirm('Are you sure?');">
            </form>
        </td>
    </tr>
    {% endfor %}
</table>

<h3>Create New Faculty</h3>
<form method="post" action="{% url 'admin_create_faculty' %}">
    {% csrf_token %}
    <label>Username: <input type="text" name="username" required></label><br>
    <label>Email: <input type="email" name="email" required></label><br>
    <label>Password: <input type="password" name="password" required></label><br>
    <label>Dept: <input type="text" name="dept" required></label><br>
    <label>Year: <input type="number" name="default_year" min="1" max="4"></label><br>
    <label>Section: <input type="text" name="default_section"></label><br>
    <input type="submit" value="Create Faculty">
</form>

<h3>Create New User</h3>
<form method="post" action="{% url 'admin_create_user' %}">
    {% csrf_token %}
    <label>Username: <input type="text" name="username" required></label><br>
    <label>Email: <input type="email" name="email" required></label><br>
    <label>Password: <input type="password" name="password" required></label><br>
    <label>Is Superuser: <input type="checkbox" name="is_superuser"></label><br>
    <input type="submit" value="Create User">
</form>
{% endblock %}
